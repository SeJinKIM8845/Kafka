# 제목 없음

## Kafka broker

- 실행된 카프카 애플리케이션 서버 중 1대
- 3대 이상의 브로커로 클러스터 구성
- 주키퍼와 연동(~2.5.0버전)
    - 주키퍼의 역할 : 메타데이터(브로커id,컨트롤러id 등) 저장
- n개 브로커 중 1대는 컨트롤러(Controller)기능 수행
    - 컨트롤러 : 각 브로커에게 담당파티션 할당 수행. 브로커 정상 동작 모니터링 관리, 누가 컨트롤러 인지는 주키퍼 저장.

## Record

- 객체를 프로듀서에서 컨슈머로 전달하기 위해 Kafka 내부에 byte형태로 저장할 수 있도록 직렬화/역직렬화하여 사용.
- 기본 제공 직렬화 class : StringSerializer,ShortSerializer 등
- 커스텀 직렬화 class를 통해 Custom Object 직렬화/역직렬화 가능

## Topic & Partition

- 메시지 분류 단위
- n개의 파티션 할당 가능
- 각 파티션마다 고유한 오프셋(offset)을 가짐.
- 메시지 처리순서는 파티션 별로 유지 관리됨.

## Producer & Consumer

- 프로듀서는 레코드를 생성하여 브로커로 전송
- 전송된 레코드는 파티션에 신규 오프셋과 함께 기록됨
- 컨슈머는 브로커로 부터 레코드를 요청하여 가져감(polling)

## Kafka log and segment

- 실제로 메시지가 저장되는 파일시스템 단위
- 메시지가 저장될 때는 세그먼트파일이 열려있음
- 세그먼트는 시간 또는 크기 기준으로 닫힘
- 세그먼트가 닫힌 이후 일정 시간(또는 용량)에 따라 삭제(delete) 또는 압축(compact)